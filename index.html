<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>NEXTCODE AI v9.0 - ì´ˆì–‘ì ì§€ëŠ¥ ì‹œìŠ¤í…œ</title>
<link rel="manifest" href="data:application/json;base64,eyJuYW1lIjoiTkVYVENPREUgQUkgdjkuMCIsInNob3J0X25hbWUiOiJORVhUQ09ERSIsInN0YXJ0X3VybCI6Ii8iLCJkaXNwbGF5Ijoic3RhbmRhbG9uZSIsImJhY2tncm91bmRfY29sb3IiOiIjZmZmZmZmIiwidGhlbWVfY29sb3IiOiIjNjY3ZWVhIn0=">
<style>
* {
margin: 0;
padding: 0;
box-sizing: border-box;
}

body {
font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Noto Sans KR', sans-serif;
background: linear-gradient(135deg, #0a0e27 0%, #1a1a3e 50%, #0f1b3a 100%);
min-height: 100vh;
display: flex;
justify-content: center;
align-items: center;
overflow-x: hidden;
}

.background-animation {
position: fixed;
width: 100%;
height: 100%;
overflow: hidden;
z-index: 0;
}

.particle {
position: absolute;
width: 3px;
height: 3px;
background: rgba(138, 180, 248, 0.6);
border-radius: 50%;
animation: float 20s infinite;
}

@keyframes float {
0%, 100% { transform: translateY(0) translateX(0); opacity: 0.3; }
50% { transform: translateY(-100vh) translateX(50px); opacity: 1; }
}

.neural-grid {
position: fixed;
width: 100%;
height: 100%;
background-image:
linear-gradient(rgba(138, 180, 248, 0.03) 1px, transparent 1px),
linear-gradient(90deg, rgba(138, 180, 248, 0.03) 1px, transparent 1px);
background-size: 50px 50px;
animation: gridMove 20s linear infinite;
z-index: 0;
}

@keyframes gridMove {
0% { transform: translate(0, 0); }
100% { transform: translate(50px, 50px); }
}

.container {
width: 95%;
max-width: 1400px;
height: 92vh;
background: rgba(255, 255, 255, 0.98);
border-radius: 28px;
box-shadow: 0 30px 100px rgba(0, 0, 0, 0.5);
display: flex;
flex-direction: column;
overflow: hidden;
z-index: 1;
backdrop-filter: blur(10px);
border: 2px solid rgba(138, 180, 248, 0.2);
}

.header {
background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
color: white;
padding: 28px 35px;
display: flex;
align-items: center;
justify-content: space-between;
box-shadow: 0 4px 20px rgba(0, 0, 0, 0.2);
position: relative;
overflow: hidden;
}

.header::before {
content: '';
position: absolute;
top: 0;
left: -100%;
width: 100%;
height: 100%;
background: linear-gradient(90deg, transparent, rgba(255,255,255,0.2), transparent);
animation: shine 3s infinite;
}

@keyframes shine {
0% { left: -100%; }
50%, 100% { left: 100%; }
}

.header-left {
display: flex;
align-items: center;
gap: 18px;
z-index: 1;
}

.logo {
width: 60px;
height: 60px;
background: white;
border-radius: 16px;
display: flex;
align-items: center;
justify-content: center;
font-size: 28px;
background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
color: white;
box-shadow: 0 6px 20px rgba(0, 0, 0, 0.3);
animation: logoPulse 2s infinite;
}

@keyframes logoPulse {
0%, 100% { transform: scale(1) rotate(0deg); }
50% { transform: scale(1.05) rotate(5deg); }
}

.title-section h1 {
font-size: 28px;
font-weight: 800;
margin-bottom: 5px;
text-shadow: 2px 2px 4px rgba(0,0,0,0.2);
}

.title-section p {
font-size: 14px;
opacity: 0.95;
font-weight: 500;
}

.version-badge {
background: rgba(255, 255, 255, 0.25);
padding: 6px 14px;
border-radius: 14px;
font-size: 12px;
font-weight: 700;
margin-left: 12px;
box-shadow: 0 2px 8px rgba(0,0,0,0.1);
animation: versionGlow 2s infinite;
}

@keyframes versionGlow {
0%, 100% { box-shadow: 0 2px 8px rgba(0,0,0,0.1); }
50% { box-shadow: 0 2px 15px rgba(255,255,255,0.5); }
}

.status {
display: flex;
flex-direction: column;
align-items: flex-end;
gap: 6px;
z-index: 1;
}

.status-online {
display: flex;
align-items: center;
gap: 10px;
font-size: 15px;
font-weight: 600;
}

.status-dot {
width: 10px;
height: 10px;
background: #4ade80;
border-radius: 50%;
animation: pulse 2s infinite;
box-shadow: 0 0 15px #4ade80;
}

@keyframes pulse {
0%, 100% { opacity: 1; transform: scale(1); }
50% { opacity: 0.6; transform: scale(1.3); }
}

.main-content {
display: flex;
flex: 1;
overflow: hidden;
}

.sidebar {
width: 280px;
background: linear-gradient(180deg, #f8fafc 0%, #e8eef5 100%);
border-right: 2px solid #e2e8f0;
padding: 25px;
overflow-y: auto;
display: flex;
flex-direction: column;
gap: 20px;
}

.stats-card {
background: white;
padding: 18px;
border-radius: 16px;
box-shadow: 0 4px 12px rgba(0, 0, 0, 0.08);
border: 2px solid transparent;
transition: all 0.3s;
cursor: pointer;
}

.stats-card:hover {
border-color: #667eea;
transform: translateY(-3px);
box-shadow: 0 6px 16px rgba(102, 126, 234, 0.2);
}

.stats-card h3 {
font-size: 14px;
color: #64748b;
margin-bottom: 8px;
font-weight: 600;
}

.stats-card .value {
font-size: 26px;
font-weight: 800;
background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
-webkit-background-clip: text;
-webkit-text-fill-color: transparent;
}

.chat-area {
flex: 1;
overflow-y: auto;
padding: 35px;
background: linear-gradient(180deg, #f8fafc 0%, #f1f5f9 100%);
}

.chat-area::-webkit-scrollbar {
width: 10px;
}

.chat-area::-webkit-scrollbar-track {
background: #e2e8f0;
border-radius: 5px;
}

.chat-area::-webkit-scrollbar-thumb {
background: #cbd5e1;
border-radius: 5px;
}

.message {
margin-bottom: 25px;
display: flex;
gap: 14px;
animation: fadeIn 0.5s ease-in;
}

@keyframes fadeIn {
from { opacity: 0; transform: translateY(20px); }
to { opacity: 1; transform: translateY(0); }
}

.message.user {
flex-direction: row-reverse;
}

.avatar {
width: 48px;
height: 48px;
border-radius: 50%;
display: flex;
align-items: center;
justify-content: center;
font-weight: bold;
flex-shrink: 0;
font-size: 18px;
box-shadow: 0 4px 12px rgba(0, 0, 0, 0.2);
}

.avatar.ai {
background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
color: white;
animation: avatarGlow 3s infinite;
}

@keyframes avatarGlow {
0%, 100% { box-shadow: 0 4px 12px rgba(102, 126, 234, 0.3); }
50% { box-shadow: 0 6px 20px rgba(102, 126, 234, 0.6); }
}

.avatar.user {
background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
color: white;
}

.message-content {
max-width: 70%;
padding: 18px 24px;
border-radius: 22px;
line-height: 1.8;
font-size: 15px;
position: relative;
}

.message.ai .message-content {
background: white;
color: #1e293b;
box-shadow: 0 4px 16px rgba(0, 0, 0, 0.12);
border: 2px solid #e2e8f0;
}

.message.user .message-content {
background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
color: white;
box-shadow: 0 4px 16px rgba(102, 126, 234, 0.3);
}

.message.system .message-content {
background: linear-gradient(135deg, #10b981 0%, #059669 100%);
color: white;
max-width: 80%;
}

.message-image {
max-width: 300px;
border-radius: 12px;
margin-top: 10px;
cursor: pointer;
transition: transform 0.3s;
}

.message-image:hover {
transform: scale(1.05);
}

.tts-btn {
position: absolute;
top: 10px;
right: 10px;
background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
color: white;
border: none;
width: 32px;
height: 32px;
border-radius: 50%;
cursor: pointer;
display: flex;
align-items: center;
justify-content: center;
font-size: 14px;
transition: all 0.3s;
}

.tts-btn:hover {
transform: scale(1.1);
}

.typing-indicator {
display: none;
gap: 6px;
padding: 18px 24px;
}

.typing-indicator.active {
display: flex;
}

.typing-dot {
width: 10px;
height: 10px;
background: #94a3b8;
border-radius: 50%;
animation: typing 1.4s infinite;
}

.typing-dot:nth-child(2) { animation-delay: 0.2s; }
.typing-dot:nth-child(3) { animation-delay: 0.4s; }

@keyframes typing {
0%, 60%, 100% { transform: translateY(0); }
30% { transform: translateY(-14px); }
}

.input-area {
padding: 28px 35px;
background: white;
border-top: 2px solid #e2e8f0;
}

.input-controls {
display: flex;
gap: 10px;
margin-bottom: 15px;
}

.control-btn {
background: linear-gradient(135deg, #f1f5f9 0%, #e2e8f0 100%);
border: 2px solid #e2e8f0;
padding: 10px 18px;
border-radius: 12px;
cursor: pointer;
transition: all 0.3s;
font-size: 14px;
font-weight: 600;
color: #64748b;
display: flex;
align-items: center;
gap: 6px;
}

.control-btn:hover {
background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
color: white;
border-color: #667eea;
transform: translateY(-2px);
}

.control-btn.active {
background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
color: white;
border-color: #667eea;
}

.input-container {
display: flex;
gap: 14px;
align-items: center;
}

#userInput {
flex: 1;
padding: 18px 26px;
border: 2px solid #e2e8f0;
border-radius: 30px;
font-size: 16px;
outline: none;
transition: all 0.3s;
background: #f8fafc;
}

#userInput:focus {
border-color: #667eea;
box-shadow: 0 0 0 5px rgba(102, 126, 234, 0.12);
background: white;
}

#sendButton {
padding: 18px 40px;
background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
color: white;
border: none;
border-radius: 30px;
font-size: 16px;
font-weight: 700;
cursor: pointer;
transition: all 0.3s;
box-shadow: 0 5px 18px rgba(102, 126, 234, 0.35);
}

#sendButton:hover {
transform: translateY(-4px);
box-shadow: 0 8px 25px rgba(102, 126, 234, 0.5);
}

.welcome-message {
text-align: center;
padding: 60px 30px;
color: #64748b;
}

.welcome-message h2 {
font-size: 36px;
color: #1e293b;
margin-bottom: 18px;
background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
-webkit-background-clip: text;
-webkit-text-fill-color: transparent;
font-weight: 800;
}

.feature-grid {
display: grid;
grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
gap: 15px;
margin: 30px 0;
}

.feature-card {
background: white;
padding: 20px;
border-radius: 16px;
box-shadow: 0 4px 12px rgba(0, 0, 0, 0.08);
transition: all 0.3s;
cursor: pointer;
border: 2px solid transparent;
}

.feature-card:hover {
border-color: #667eea;
transform: translateY(-5px);
box-shadow: 0 8px 20px rgba(102, 126, 234, 0.2);
}

.feature-card h3 {
font-size: 16px;
margin-bottom: 8px;
color: #1e293b;
}

.feature-card p {
font-size: 13px;
color: #64748b;
}

.modal {
display: none;
position: fixed;
top: 0;
left: 0;
width: 100%;
height: 100%;
background: rgba(0, 0, 0, 0.8);
backdrop-filter: blur(10px);
z-index: 1000;
justify-content: center;
align-items: center;
}

.modal.active {
display: flex;
}

.modal-content {
background: white;
border-radius: 24px;
padding: 40px;
max-width: 600px;
width: 90%;
max-height: 80vh;
overflow-y: auto;
box-shadow: 0 20px 60px rgba(0, 0, 0, 0.5);
animation: slideUp 0.4s ease;
}

@keyframes slideUp {
from { transform: translateY(50px); opacity: 0; }
to { transform: translateY(0); opacity: 1; }
}

.modal-header {
display: flex;
justify-content: space-between;
align-items: center;
margin-bottom: 20px;
}

.modal-header h2 {
font-size: 24px;
background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
-webkit-background-clip: text;
-webkit-text-fill-color: transparent;
}

.close-btn {
background: none;
border: none;
font-size: 24px;
cursor: pointer;
color: #64748b;
}

.language-grid {
display: grid;
grid-template-columns: repeat(3, 1fr);
gap: 10px;
margin: 20px 0;
}

.language-btn {
padding: 12px;
background: #f8fafc;
border: 2px solid #e2e8f0;
border-radius: 12px;
cursor: pointer;
transition: all 0.3s;
text-align: center;
font-size: 14px;
}

.language-btn:hover, .language-btn.selected {
background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
color: white;
border-color: #667eea;
}

.theme-builder {
padding: 20px;
}

.color-picker-group {
margin-bottom: 20px;
}

.color-picker-group label {
display: block;
font-weight: 600;
margin-bottom: 8px;
color: #1e293b;
}

.color-picker-group input[type="color"] {
width: 100%;
height: 50px;
border: 2px solid #e2e8f0;
border-radius: 12px;
cursor: pointer;
}

.chart-container {
background: white;
padding: 20px;
border-radius: 16px;
margin: 20px 0;
box-shadow: 0 4px 12px rgba(0, 0, 0, 0.08);
}

.chart-canvas {
width: 100%;
height: 200px;
}

.image-upload-area {
border: 2px dashed #e2e8f0;
border-radius: 16px;
padding: 30px;
text-align: center;
cursor: pointer;
transition: all 0.3s;
margin: 20px 0;
}

.image-upload-area:hover {
border-color: #667eea;
background: rgba(102, 126, 234, 0.05);
}

.image-upload-area.dragover {
border-color: #667eea;
background: rgba(102, 126, 234, 0.1);
}

#imageInput {
display: none;
}

.floating-btns {
position: fixed;
bottom: 20px;
right: 20px;
display: flex;
flex-direction: column;
gap: 12px;
z-index: 999;
}

.floating-btn {
width: 56px;
height: 56px;
border-radius: 50%;
background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
color: white;
border: none;
font-size: 24px;
cursor: pointer;
box-shadow: 0 4px 15px rgba(102, 126, 234, 0.4);
transition: all 0.3s;
display: flex;
align-items: center;
justify-content: center;
}

.floating-btn:hover {
transform: scale(1.1);
box-shadow: 0 6px 20px rgba(102, 126, 234, 0.6);
}

.notification {
position: fixed;
top: 100px;
right: 20px;
background: white;
padding: 20px 24px;
border-radius: 16px;
box-shadow: 0 8px 30px rgba(0, 0, 0, 0.2);
border-left: 4px solid #10b981;
z-index: 1001;
animation: slideInRight 0.4s ease;
display: none;
max-width: 350px;
}

.notification.show {
display: block;
}

@keyframes slideInRight {
from { transform: translateX(400px); opacity: 0; }
to { transform: translateX(0); opacity: 1; }
}

.notification.success {
border-left-color: #10b981;
}

.notification.error {
border-left-color: #ef4444;
}

.notification.info {
border-left-color: #3b82f6;
}

@media (max-width: 768px) {
.container {
width: 100%;
height: 100vh;
border-radius: 0;
}

.sidebar {
display: none;
}

.chat-area {
padding: 20px 15px;
}

.input-area {
padding: 15px 20px;
}

.input-controls {
flex-wrap: wrap;
}

.control-btn {
flex: 1;
min-width: 45%;
padding: 8px 12px;
font-size: 12px;
}

.language-grid {
grid-template-columns: repeat(2, 1fr);
}

.floating-btns {
bottom: 90px;
right: 15px;
}

.floating-btn {
width: 48px;
height: 48px;
font-size: 20px;
}
}
</style>
</head>
<body>
<div class="neural-grid"></div>
<div class="background-animation" id="particles"></div>

<div class="container">
<div class="header">
<div class="header-left">
<div class="logo">ğŸ§ </div>
<div class="title-section">
<h1>NEXTCODE AI <span class="version-badge">v9.0</span></h1>
<p>ì´ˆì–‘ì ì‹ ê²½ë§ ì§€ëŠ¥ ì‹œìŠ¤í…œ</p>
</div>
</div>
<div class="status">
<div class="status-online">
<div class="status-dot"></div>
<span>ì˜¨ë¼ì¸</span>
</div>
</div>
</div>

<div class="main-content">
<div class="sidebar">
<div class="stats-card" onclick="openModal('statsModal')">
<h3>ğŸ“Š ëŒ€í™” í†µê³„</h3>
<div class="value" id="totalChats">0</div>
</div>

<div class="stats-card" onclick="openModal('cloudModal')">
<h3>â˜ï¸ í´ë¼ìš°ë“œ</h3>
<div class="value" style="font-size: 16px;">ë™ê¸°í™”ë¨</div>
</div>

<div class="stats-card">
<h3>ğŸ¯ ì •í™•ë„</h3>
<div class="value">99.95%</div>
</div>
</div>

<div class="chat-area" id="chatArea">
<div class="welcome-message">
<h2>ğŸš€ NEXTCODE AI v9.0</h2>
<p style="font-size: 16px; font-weight: 600; margin-bottom: 20px;">
ì´ˆì–‘ì ì»´í“¨íŒ… ê¸°ë°˜ ì°¨ì„¸ëŒ€ AI ì–´ì‹œìŠ¤í„´íŠ¸
</p>

<div class="feature-grid">
<div class="feature-card" onclick="document.getElementById('voiceBtn').click()">
<h3>ğŸ¤ ìŒì„± ì¸ì‹</h3>
<p>ìŒì„±ìœ¼ë¡œ ì§ˆë¬¸í•˜ê¸°</p>
</div>
<div class="feature-card" onclick="document.getElementById('imageUploadArea').click()">
<h3>ğŸ“¸ ì´ë¯¸ì§€ ë¶„ì„</h3>
<p>ì´ë¯¸ì§€ ì—…ë¡œë“œ</p>
</div>
<div class="feature-card" onclick="openModal('translateModal')">
<h3>ğŸŒ ë‹¤êµ­ì–´ ë²ˆì—­</h3>
<p>50ê°œ ì–¸ì–´ ì§€ì›</p>
</div>
<div class="feature-card" onclick="openModal('themeModal')">
<h3>ğŸ¨ í…Œë§ˆ ë¹Œë”</h3>
<p>ì»¤ìŠ¤í…€ í…Œë§ˆ ì œì‘</p>
</div>
<div class="feature-card" onclick="openModal('assistantModal')">
<h3>ğŸ¤– AI ì–´ì‹œìŠ¤í„´íŠ¸</h3>
<p>ì‘ì—… ìë™í™”</p>
</div>
<div class="feature-card" onclick="installPWA()">
<h3>ğŸ“± ì•± ì„¤ì¹˜</h3>
<p>PWA ì§€ì›</p>
</div>
</div>
</div>
</div>
</div>

<div class="input-area">
<div class="input-controls">
<button class="control-btn" id="voiceBtn" title="ìŒì„± ì…ë ¥">
ğŸ¤ ìŒì„±
</button>
<button class="control-btn" id="imageBtn" title="ì´ë¯¸ì§€ ì—…ë¡œë“œ">
ğŸ“¸ ì´ë¯¸ì§€
</button>
<button class="control-btn" id="translateBtn" onclick="openModal('translateModal')" title="ë‹¤êµ­ì–´ ë²ˆì—­">
ğŸŒ ë²ˆì—­
</button>
<button class="control-btn" id="ttsToggle" title="TTS ìë™ ì¬ìƒ">
ğŸ”Š TTS
</button>
</div>

<div class="image-upload-area" id="imageUploadArea" style="display: none;">
<p>ğŸ“¸ ì—¬ê¸°ì— ì´ë¯¸ì§€ë¥¼ ë“œë˜ê·¸í•˜ê±°ë‚˜ í´ë¦­í•˜ì„¸ìš”</p>
<input type="file" id="imageInput" accept="image/*">
<div id="imagePreview"></div>
</div>

<div class="input-container">
<input
type="text"
id="userInput"
placeholder="ë¬´ì—‡ì´ë“  ë¬¼ì–´ë³´ì„¸ìš”... (v9.0 ì´ˆì–‘ì ì—”ì§„) âš¡"
>
<button id="sendButton">ì „ì†¡</button>
</div>
</div>
</div>

<!-- í†µê³„ ëª¨ë‹¬ -->
<div class="modal" id="statsModal">
<div class="modal-content">
<div class="modal-header">
<h2>ğŸ“Š ì‹¤ì‹œê°„ í†µê³„</h2>
<button class="close-btn" onclick="closeModal('statsModal')">Ã—</button>
</div>
<div class="chart-container">
<canvas id="statsChart" class="chart-canvas"></canvas>
</div>
<div style="margin-top: 20px;">
<p><strong>ì´ ëŒ€í™”:</strong> <span id="statsTotal">0</span>ê°œ</p>
<p><strong>í‰ê·  ì‘ë‹µ ì‹œê°„:</strong> 1.2ì´ˆ</p>
<p><strong>ë§Œì¡±ë„:</strong> 98.5%</p>
</div>
</div>
</div>

<!-- í´ë¼ìš°ë“œ ë™ê¸°í™” ëª¨ë‹¬ -->
<div class="modal" id="cloudModal">
<div class="modal-content">
<div class="modal-header">
<h2>â˜ï¸ í´ë¼ìš°ë“œ ë™ê¸°í™”</h2>
<button class="close-btn" onclick="closeModal('cloudModal')">Ã—</button>
</div>
<div style="text-align: center; padding: 20px;">
<div style="font-size: 64px; margin-bottom: 20px;">â˜ï¸</div>
<p style="font-size: 18px; font-weight: 600; margin-bottom: 10px;">
ìë™ ë°±ì—… í™œì„±í™”ë¨
</p>
<p style="color: #64748b; margin-bottom: 20px;">
ëª¨ë“  ëŒ€í™”ê°€ ì•ˆì „í•˜ê²Œ ì €ì¥ë©ë‹ˆë‹¤
</p>
<button class="control-btn active" style="width: 100%; justify-content: center;">
âœ… ë™ê¸°í™” ì™„ë£Œ
</button>
</div>
</div>
</div>

<!-- ë²ˆì—­ ëª¨ë‹¬ -->
<div class="modal" id="translateModal">
<div class="modal-content">
<div class="modal-header">
<h2>ğŸŒ ë‹¤êµ­ì–´ ë²ˆì—­</h2>
<button class="close-btn" onclick="closeModal('translateModal')">Ã—</button>
</div>
<p style="margin-bottom: 15px; color: #64748b;">ë²ˆì—­í•  ì–¸ì–´ë¥¼ ì„ íƒí•˜ì„¸ìš”:</p>
<div class="language-grid">
<button class="language-btn" onclick="setLanguage('ko')">ğŸ‡°ğŸ‡· í•œêµ­ì–´</button>
<button class="language-btn" onclick="setLanguage('en')">ğŸ‡ºğŸ‡¸ English</button>
<button class="language-btn" onclick="setLanguage('ja')">ğŸ‡¯ğŸ‡µ æ—¥æœ¬èª</button>
<button class="language-btn" onclick="setLanguage('zh')">ğŸ‡¨ğŸ‡³ ä¸­æ–‡</button>
<button class="language-btn" onclick="setLanguage('es')">ğŸ‡ªğŸ‡¸ EspaÃ±ol</button>
<button class="language-btn" onclick="setLanguage('fr')">ğŸ‡«ğŸ‡· FranÃ§ais</button>
<button class="language-btn" onclick="setLanguage('de')">ğŸ‡©ğŸ‡ª Deutsch</button>
<button class="language-btn" onclick="setLanguage('ru')">ğŸ‡·ğŸ‡º Ğ ÑƒÑÑĞºĞ¸Ğ¹</button>
<button class="language-btn" onclick="setLanguage('ar')">ğŸ‡¸ğŸ‡¦ Ø§Ù„Ø¹Ø±Ø¨ÙŠØ©</button>
</div>
</div>
</div>

<!-- í…Œë§ˆ ë¹Œë” ëª¨ë‹¬ -->
<div class="modal" id="themeModal">
<div class="modal-content">
<div class="modal-header">
<h2>ğŸ¨ í…Œë§ˆ ë¹Œë”</h2>
<button class="close-btn" onclick="closeModal('themeModal')">Ã—</button>
</div>
<div class="theme-builder">
<div class="color-picker-group">
<label>ì£¼ìš” ìƒ‰ìƒ</label>
<input type="color" id="primaryColor" value="#667eea">
</div>
<div class="color-picker-group">
<label>ë³´ì¡° ìƒ‰ìƒ</label>
<input type="color" id="secondaryColor" value="#764ba2">
</div>
<div class="color-picker-group">
<label>ë°°ê²½ ìƒ‰ìƒ</label>
<input type="color" id="bgColor" value="#f8fafc">
</div>
<button class="control-btn active" style="width: 100%; justify-content: center; margin-top: 20px;" onclick="applyTheme()">
âœ¨ í…Œë§ˆ ì ìš©
</button>
</div>
</div>
</div>

<!-- AI ì–´ì‹œìŠ¤í„´íŠ¸ ëª¨ë‹¬ -->
<div class="modal" id="assistantModal">
<div class="modal-content">
<div class="modal-header">
<h2>ğŸ¤– AI ì–´ì‹œìŠ¤í„´íŠ¸</h2>
<button class="close-btn" onclick="closeModal('assistantModal')">Ã—</button>
</div>
<div style="padding: 20px;">
<h3 style="margin-bottom: 15px; color: #1e293b;">ìë™í™” ì‘ì—… ì„ íƒ</h3>
<button class="control-btn" style="width: 100%; margin-bottom: 10px; justify-content: flex-start;" onclick="runAssistant('summarize')">
ğŸ“ ëŒ€í™” ìš”ì•½í•˜ê¸°
</button>
<button class="control-btn" style="width: 100%; margin-bottom: 10px; justify-content: flex-start;" onclick="runAssistant('translate')">
ğŸŒ ì „ì²´ ëŒ€í™” ë²ˆì—­
</button>
<button class="control-btn" style="width: 100%; margin-bottom: 10px; justify-content: flex-start;" onclick="runAssistant('analyze')">
ğŸ“Š ëŒ€í™” ë¶„ì„
</button>
<button class="control-btn" style="width: 100%; justify-content: flex-start;" onclick="runAssistant('export')">
ğŸ’¾ ëŒ€í™” ë‚´ë³´ë‚´ê¸°
</button>
</div>
</div>
</div>

<!-- ê°œë°œì ëª¨ë“œ í† ê¸€ -->
<button class="floating-btn" id="devModeToggle" style="position: fixed; bottom: 20px; right: 20px;" title="ê°œë°œì ëª¨ë“œ">
ğŸ”§
</button>

<!-- ê°œë°œì ë¡œê·¸ì¸ ëª¨ë‹¬ -->
<div class="modal" id="devModal">
<div class="modal-content" style="background: linear-gradient(135deg, #1e293b 0%, #0f172a 100%); color: white; border: 2px solid #667eea;">
<div class="modal-header">
<h2 style="color: white;">ğŸ” ê°œë°œì ëª¨ë“œ</h2>
<button class="close-btn" onclick="closeModal('devModal')" style="color: white;">Ã—</button>
</div>
<p style="color: #94a3b8; margin-bottom: 20px;">ê°œë°œì ë¹„ë°€ë²ˆí˜¸ë¥¼ ì…ë ¥í•˜ì„¸ìš”</p>
<div id="devError" class="notification error" style="display: none; position: relative; top: 0; right: 0; margin-bottom: 15px;">
âŒ ë¹„ë°€ë²ˆí˜¸ê°€ ì˜¬ë°”ë¥´ì§€ ì•ŠìŠµë‹ˆë‹¤!
</div>
<input type="password" id="devPassword" placeholder="ê°œë°œì ë¹„ë°€ë²ˆí˜¸" style="width: 100%; padding: 14px; border: 2px solid #334155; border-radius: 12px; background: #0f172a; color: white; font-size: 15px; margin-bottom: 20px;">
<div style="display: flex; gap: 12px;">
<button onclick="closeModal('devModal')" style="flex: 1; padding: 14px; background: #334155; color: white; border: none; border-radius: 12px; cursor: pointer; font-weight: 600;">ì·¨ì†Œ</button>
<button onclick="devLogin()" style="flex: 1; padding: 14px; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; border: none; border-radius: 12px; cursor: pointer; font-weight: 600;">ğŸ”“ ë¡œê·¸ì¸</button>
</div>
</div>
</div>

<!-- ê°œë°œì íŒ¨ë„ -->
<div id="devPanel" style="display: none; position: fixed; top: 50%; right: 20px; transform: translateY(-50%); background: linear-gradient(135deg, #1e293b 0%, #0f172a 100%); border-radius: 20px; padding: 25px; width: 320px; max-height: 85vh; overflow-y: auto; box-shadow: 0 10px 40px rgba(0,0,0,0.5); border: 2px solid #10b981; z-index: 999; color: white;">
<h3 style="color: #10b981; margin-bottom: 8px;">âš™ï¸ ê°œë°œì ëª¨ë“œ</h3>
<p style="font-size: 12px; color: #94a3b8; margin-bottom: 20px;">ì‹œìŠ¤í…œ ì„¤ì • ë° ê³ ê¸‰ ì˜µì…˜</p>

<!-- ëŒ€í™” ê´€ë¦¬ -->
<div style="margin-bottom: 25px; padding-bottom: 20px; border-bottom: 1px solid #334155;">
<div style="font-size: 14px; font-weight: 700; color: #10b981; margin-bottom: 12px;">ğŸ’¾ ëŒ€í™” ë‚´ì—­ ê´€ë¦¬</div>
<button onclick="devSaveChat()" style="width: 100%; padding: 10px; margin-bottom: 8px; background: linear-gradient(135deg, #10b981 0%, #059669 100%); color: white; border: none; border-radius: 10px; cursor: pointer; font-weight: 600;">ëŒ€í™” ì €ì¥</button>
<button onclick="devLoadChat()" style="width: 100%; padding: 10px; margin-bottom: 8px; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; border: none; border-radius: 10px; cursor: pointer; font-weight: 600;">ëŒ€í™” ë¶ˆëŸ¬ì˜¤ê¸°</button>
<button onclick="devExportChat()" style="width: 100%; padding: 10px; margin-bottom: 8px; background: #334155; color: white; border: none; border-radius: 10px; cursor: pointer; font-weight: 600;">ëŒ€í™” ë‚´ë³´ë‚´ê¸° (JSON)</button>
<button onclick="devClearChat()" style="width: 100%; padding: 10px; background: linear-gradient(135deg, #ef4444 0%, #dc2626 100%); color: white; border: none; border-radius: 10px; cursor: pointer; font-weight: 600;">ì „ì²´ ëŒ€í™” ì‚­ì œ</button>
</div>

<!-- AI ì„¤ì • -->
<div style="margin-bottom: 25px; padding-bottom: 20px; border-bottom: 1px solid #334155;">
<div style="font-size: 14px; font-weight: 700; color: #10b981; margin-bottom: 12px;">ğŸ­ AI ì„¤ì •</div>
<div style="margin-bottom: 15px;">
<label style="font-size: 12px; color: #94a3b8; display: block; margin-bottom: 5px;">ì‘ë‹µ ì†ë„</label>
<input type="range" id="devSpeed" min="0" max="100" value="50" style="width: 100%;" onchange="document.getElementById('devSpeedVal').textContent = this.value + '%'">
<div style="font-size: 11px; color: #94a3b8; display: flex; justify-content: space-between; margin-top: 5px;">
<span>ëŠë¦¼</span>
<span id="devSpeedVal">50%</span>
<span>ë¹ ë¦„</span>
</div>
</div>
<div style="margin-bottom: 15px;">
<label style="font-size: 12px; color: #94a3b8; display: block; margin-bottom: 5px;">ì‘ë‹µ ê¸¸ì´</label>
<select id="devLength" style="width: 100%; padding: 10px; background: #0f172a; color: white; border: 2px solid #334155; border-radius: 10px;">
<option>ì§§ê²Œ</option>
<option selected>ë³´í†µ</option>
<option>ìƒì„¸í•˜ê²Œ</option>
</select>
</div>
</div>

<!-- ê³ ê¸‰ ê¸°ëŠ¥ -->
<div style="margin-bottom: 25px; padding-bottom: 20px; border-bottom: 1px solid #334155;">
<div style="font-size: 14px; font-weight: 700; color: #10b981; margin-bottom: 12px;">âš¡ ê³ ê¸‰ ê¸°ëŠ¥</div>
<div onclick="toggleDevOption('profanity')" style="background: #0f172a; padding: 12px; border-radius: 10px; margin-bottom: 10px; cursor: pointer; border: 2px solid #334155;">
<div style="display: flex; justify-content: space-between; align-items: center;">
<span style="font-size: 13px;">ìš•ì„¤ í•„í„°</span>
<div id="toggle-profanity" class="dev-toggle" style="position: relative; width: 44px; height: 24px; background: #10b981; border-radius: 12px; transition: all 0.3s;">
<div style="position: absolute; top: 2px; left: 22px; width: 20px; height: 20px; background: white; border-radius: 50%; transition: all 0.3s;"></div>
</div>
</div>
</div>
<div onclick="toggleDevOption('debug')" style="background: #0f172a; padding: 12px; border-radius: 10px; margin-bottom: 10px; cursor: pointer; border: 2px solid #334155;">
<div style="display: flex; justify-content: space-between; align-items: center;">
<span style="font-size: 13px;">ë””ë²„ê·¸ ëª¨ë“œ</span>
<div id="toggle-debug" class="dev-toggle" style="position: relative; width: 44px; height: 24px; background: #334155; border-radius: 12px; transition: all 0.3s;">
<div style="position: absolute; top: 2px; left: 2px; width: 20px; height: 20px; background: white; border-radius: 50%; transition: all 0.3s;"></div>
</div>
</div>
</div>
<div onclick="toggleDevOption('fastmode')" style="background: #0f172a; padding: 12px; border-radius: 10px; cursor: pointer; border: 2px solid #334155;">
<div style="display: flex; justify-content: space-between; align-items: center;">
<span style="font-size: 13px;">ë¹ ë¥¸ ì‘ë‹µ</span>
<div id="toggle-fastmode" class="dev-toggle" style="position: relative; width: 44px; height: 24px; background: #334155; border-radius: 12px; transition: all 0.3s;">
<div style="position: absolute; top: 2px; left: 2px; width: 20px; height: 20px; background: white; border-radius: 50%; transition: all 0.3s;"></div>
</div>
</div>
</div>
</div>

<!-- í†µê³„ -->
<div style="background: #0f172a; padding: 12px; border-radius: 10px; font-size: 12px; color: #94a3b8; border: 1px solid #334155;">
<div style="display: flex; justify-content: space-between; margin-bottom: 6px;">
<span>ì‹œìŠ¤í…œ ìƒíƒœ:</span>
<span style="color: #10b981; font-weight: 700;">ìµœì </span>
</div>
<div style="display: flex; justify-content: space-between; margin-bottom: 6px;">
<span>ì´ ëŒ€í™”:</span>
<span style="color: #10b981; font-weight: 700;" id="devTotalChats">0</span>
</div>
<div style="display: flex; justify-content: space-between;">
<span>ì²˜ë¦¬ ì†ë„:</span>
<span style="color: #10b981; font-weight: 700;">99.5%</span>
</div>
</div>
</div>

<!-- í”Œë¡œíŒ… ë²„íŠ¼ë“¤ -->
<div class="floating-btns" style="position: fixed; bottom: 90px; right: 20px; display: flex; flex-direction: column; gap: 12px; z-index: 998;">
<button class="floating-btn" onclick="scrollToBottom()" title="ë§¨ ì•„ë˜ë¡œ">
â¬‡ï¸
</button>
<button class="floating-btn" onclick="openModal('statsModal')" title="í†µê³„">
ğŸ“Š
</button>
</div>

<!-- ì•Œë¦¼ -->
<div class="notification" id="notification">
<div id="notificationText"></div>
</div>

<!-- ê°œë°œì ëª¨ë“œ í† ê¸€ ë²„íŠ¼ -->
<button class="floating-btn" id="devModeToggle" style="position: fixed; bottom: 20px; right: 20px; z-index: 1000;" title="ê°œë°œì ëª¨ë“œ">
ğŸ”§
</button>

<!-- ê°œë°œì ë¡œê·¸ì¸ ëª¨ë‹¬ -->
<div class="modal" id="devModal">
<div class="modal-content" style="background: linear-gradient(135deg, #1e293b 0%, #0f172a 100%); color: white; border: 2px solid #667eea;">
<div class="modal-header">
<h2 style="color: white;">ğŸ” ê°œë°œì ëª¨ë“œ</h2>
<button class="close-btn" onclick="closeModal('devModal')" style="color: white;">Ã—</button>
</div>
<p style="color: #94a3b8; margin-bottom: 20px;">ê°œë°œì ë¹„ë°€ë²ˆí˜¸ë¥¼ ì…ë ¥í•˜ì„¸ìš”</p>
<div id="devError" style="display: none; background: rgba(239, 68, 68, 0.2); border: 2px solid #ef4444; color: #fecaca; padding: 12px; border-radius: 10px; margin-bottom: 15px;">
âŒ ë¹„ë°€ë²ˆí˜¸ê°€ ì˜¬ë°”ë¥´ì§€ ì•ŠìŠµë‹ˆë‹¤!
</div>
<input type="password" id="devPassword" placeholder="ê°œë°œì ë¹„ë°€ë²ˆí˜¸" style="width: 100%; padding: 14px; border: 2px solid #334155; border-radius: 12px; background: #0f172a; color: white; font-size: 15px; margin-bottom: 20px;">
<div style="display: flex; gap: 12px;">
<button onclick="closeModal('devModal')" style="flex: 1; padding: 14px; background: #334155; color: white; border: none; border-radius: 12px; cursor: pointer; font-weight: 600;">ì·¨ì†Œ</button>
<button onclick="devLogin()" style="flex: 1; padding: 14px; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; border: none; border-radius: 12px; cursor: pointer; font-weight: 600;">ğŸ”“ ë¡œê·¸ì¸</button>
</div>
</div>
</div>

<!-- ê°œë°œì íŒ¨ë„ -->
<div id="devPanel" style="display: none; position: fixed; top: 50%; right: 20px; transform: translateY(-50%); background: linear-gradient(135deg, #1e293b 0%, #0f172a 100%); border-radius: 20px; padding: 25px; width: 320px; max-height: 85vh; overflow-y: auto; box-shadow: 0 10px 40px rgba(0,0,0,0.5); border: 2px solid #10b981; z-index: 999; color: white;">
<h3 style="color: #10b981; margin-bottom: 8px; font-size: 18px; font-weight: 800;">âš™ï¸ ê°œë°œì ëª¨ë“œ</h3>
<p style="font-size: 12px; color: #94a3b8; margin-bottom: 20px;">ì‹œìŠ¤í…œ ì„¤ì • ë° ê³ ê¸‰ ì˜µì…˜</p>

<!-- ëŒ€í™” ê´€ë¦¬ -->
<div style="margin-bottom: 25px; padding-bottom: 20px; border-bottom: 1px solid #334155;">
<div style="font-size: 14px; font-weight: 700; color: #10b981; margin-bottom: 12px;">ğŸ’¾ ëŒ€í™” ë‚´ì—­ ê´€ë¦¬</div>
<button onclick="devSaveChat()" style="width: 100%; padding: 10px; margin-bottom: 8px; background: linear-gradient(135deg, #10b981 0%, #059669 100%); color: white; border: none; border-radius: 10px; cursor: pointer; font-weight: 600; font-size: 13px;">ëŒ€í™” ì €ì¥</button>
<button onclick="devLoadChat()" style="width: 100%; padding: 10px; margin-bottom: 8px; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; border: none; border-radius: 10px; cursor: pointer; font-weight: 600; font-size: 13px;">ëŒ€í™” ë¶ˆëŸ¬ì˜¤ê¸°</button>
<button onclick="devExportChat()" style="width: 100%; padding: 10px; margin-bottom: 8px; background: #334155; color: white; border: none; border-radius: 10px; cursor: pointer; font-weight: 600; font-size: 13px;">ëŒ€í™” ë‚´ë³´ë‚´ê¸° (JSON)</button>
<button onclick="devClearChat()" style="width: 100%; padding: 10px; background: linear-gradient(135deg, #ef4444 0%, #dc2626 100%); color: white; border: none; border-radius: 10px; cursor: pointer; font-weight: 600; font-size: 13px;">ì „ì²´ ëŒ€í™” ì‚­ì œ</button>
</div>

<!-- AI ì„¤ì • -->
<div style="margin-bottom: 25px; padding-bottom: 20px; border-bottom: 1px solid #334155;">
<div style="font-size: 14px; font-weight: 700; color: #10b981; margin-bottom: 12px;">ğŸ­ AI ì„¤ì •</div>
<div style="margin-bottom: 15px;">
<label style="font-size: 12px; color: #94a3b8; display: block; margin-bottom: 5px;">ì‘ë‹µ ì†ë„</label>
<input type="range" id="devSpeed" min="0" max="100" value="50" style="width: 100%;" onchange="document.getElementById('devSpeedVal').textContent = this.value + '%'">
<div style="font-size: 11px; color: #94a3b8; display: flex; justify-content: space-between; margin-top: 5px;">
<span>ëŠë¦¼</span>
<span id="devSpeedVal">50%</span>
<span>ë¹ ë¦„</span>
</div>
</div>
<div style="margin-bottom: 15px;">
<label style="font-size: 12px; color: #94a3b8; display: block; margin-bottom: 5px;">ì‘ë‹µ ê¸¸ì´</label>
<select id="devLength" style="width: 100%; padding: 10px; background: #0f172a; color: white; border: 2px solid #334155; border-radius: 10px; font-size: 13px;">
<option>ì§§ê²Œ</option>
<option selected>ë³´í†µ</option>
<option>ìƒì„¸í•˜ê²Œ</option>
</select>
</div>
</div>

<!-- ê³ ê¸‰ ê¸°ëŠ¥ -->
<div style="margin-bottom: 25px; padding-bottom: 20px; border-bottom: 1px solid #334155;">
<div style="font-size: 14px; font-weight: 700; color: #10b981; margin-bottom: 12px;">âš¡ ê³ ê¸‰ ê¸°ëŠ¥</div>
<div onclick="toggleDevOption('profanity')" style="background: #0f172a; padding: 12px; border-radius: 10px; margin-bottom: 10px; cursor: pointer; border: 2px solid #334155;">
<div style="display: flex; justify-content: space-between; align-items: center;">
<span style="font-size: 13px; font-weight: 600;">ìš•ì„¤ í•„í„°</span>
<div id="toggle-profanity" style="position: relative; width: 44px; height: 24px; background: #10b981; border-radius: 12px; transition: all 0.3s;">
<div style="position: absolute; top: 2px; left: 22px; width: 20px; height: 20px; background: white; border-radius: 50%; transition: all 0.3s;"></div>
</div>
</div>
</div>
<div onclick="toggleDevOption('debug')" style="background: #0f172a; padding: 12px; border-radius: 10px; margin-bottom: 10px; cursor: pointer; border: 2px solid #334155;">
<div style="display: flex; justify-content: space-between; align-items: center;">
<span style="font-size: 13px; font-weight: 600;">ë””ë²„ê·¸ ëª¨ë“œ</span>
<div id="toggle-debug" style="position: relative; width: 44px; height: 24px; background: #334155; border-radius: 12px; transition: all 0.3s;">
<div style="position: absolute; top: 2px; left: 2px; width: 20px; height: 20px; background: white; border-radius: 50%; transition: all 0.3s;"></div>
</div>
</div>
</div>
<div onclick="toggleDevOption('fastmode')" style="background: #0f172a; padding: 12px; border-radius: 10px; cursor: pointer; border: 2px solid #334155;">
<div style="display: flex; justify-content: space-between; align-items: center;">
<span style="font-size: 13px; font-weight: 600;">ë¹ ë¥¸ ì‘ë‹µ</span>
<div id="toggle-fastmode" style="position: relative; width: 44px; height: 24px; background: #334155; border-radius: 12px; transition: all 0.3s;">
<div style="position: absolute; top: 2px; left: 2px; width: 20px; height: 20px; background: white; border-radius: 50%; transition: all 0.3s;"></div>
</div>
</div>
</div>
</div>

<!-- í†µê³„ -->
<div style="background: #0f172a; padding: 12px; border-radius: 10px; font-size: 12px; color: #94a3b8; border: 1px solid #334155;">
<div style="display: flex; justify-content: space-between; margin-bottom: 6px;">
<span>ì‹œìŠ¤í…œ ìƒíƒœ:</span>
<span style="color: #10b981; font-weight: 700;">ìµœì </span>
</div>
<div style="display: flex; justify-content: space-between; margin-bottom: 6px;">
<span>ì´ ëŒ€í™”:</span>
<span style="color: #10b981; font-weight: 700;" id="devTotalChats">0</span>
</div>
<div style="display: flex; justify-content: space-between;">
<span>ì²˜ë¦¬ ì†ë„:</span>
<span style="color: #10b981; font-weight: 700;">99.5%</span>
</div>
</div>
</div>

<!-- í”Œë¡œíŒ… ë²„íŠ¼ë“¤ (í†µê³„, ìŠ¤í¬ë¡¤) -->
<div class="floating-btns" style="position: fixed; bottom: 90px; right: 20px; display: flex; flex-direction: column; gap: 12px; z-index: 998;">
<button class="floating-btn" onclick="scrollToBottom()" title="ë§¨ ì•„ë˜ë¡œ">
â¬‡ï¸
</button>
<button class="floating-btn" onclick="openModal('statsModal')" title="í†µê³„">
ğŸ“Š
</button>
</div>

<script>
let chatHistory = [];
let currentLanguage = 'ko';
let ttsEnabled = false;
let voiceRecognition = null;
let totalChats = 0;
let devMode = {
    active: false,
    profanityFilter: true,
    debugMode: false,
    fastMode: false
};
const DEV_PASSWORD = 'haeundae1125';

// ì´ˆê¸°í™”
document.addEventListener('DOMContentLoaded', function() {
createParticles();
loadChatHistory();
initVoiceRecognition();
setupImageUpload();
initDevMode();
updateStats();

// PWA ì„¤ì¹˜ í”„ë¡¬í”„íŠ¸
let deferredPrompt;
window.addEventListener('beforeinstallprompt', (e) => {
e.preventDefault();
deferredPrompt = e;
});
});

// ê°œë°œì ëª¨ë“œ ì´ˆê¸°í™”
function initDevMode() {
    const devToggle = document.getElementById('devModeToggle');
    if (devToggle) {
        devToggle.addEventListener('click', function() {
            if (devMode.active) {
                const panel = document.getElementById('devPanel');
                panel.style.display = panel.style.display === 'none' ? 'block' : 'none';
            } else {
                openModal('devModal');
                setTimeout(() => {
                    document.getElementById('devPassword').value = '';
                    document.getElementById('devPassword').focus();
                    document.getElementById('devError').style.display = 'none';
                }, 100);
            }
        });
    }
    
    const devPasswordInput = document.getElementById('devPassword');
    if (devPasswordInput) {
        devPasswordInput.addEventListener('keypress', function(e) {
            if (e.key === 'Enter') devLogin();
        });
    }
}

function devLogin() {
    const password = document.getElementById('devPassword').value;
    if (password === DEV_PASSWORD) {
        devMode.active = true;
        const devToggle = document.getElementById('devModeToggle');
        if (devToggle) {
            devToggle.style.background = 'linear-gradient(135deg, #10b981 0%, #059669 100%)';
            devToggle.style.boxShadow = '0 4px 15px rgba(16, 185, 129, 0.6)';
        }
        closeModal('devModal');
        document.getElementById('devPanel').style.display = 'block';
        showNotification('ê°œë°œì ëª¨ë“œ í™œì„±í™” âœ…', 'success');
        console.log('ğŸ”§ ê°œë°œì ëª¨ë“œ í™œì„±í™”ë¨');
    } else {
        document.getElementById('devError').style.display = 'block';
        setTimeout(() => {
            document.getElementById('devError').style.display = 'none';
        }, 3000);
    }
}

function toggleDevOption(option) {
    const toggle = document.getElementById(`toggle-${option}`);
    const circle = toggle.querySelector('div');
    
    if (option === 'profanity') {
        devMode.profanityFilter = !devMode.profanityFilter;
        if (devMode.profanityFilter) {
            toggle.style.background = '#10b981';
            circle.style.left = '22px';
            showNotification('ìš•ì„¤ í•„í„° ON âœ…', 'success');
        } else {
            toggle.style.background = '#334155';
            circle.style.left = '2px';
            showNotification('ìš•ì„¤ í•„í„° OFF âŒ', 'error');
        }
    } else if (option === 'debug') {
        devMode.debugMode = !devMode.debugMode;
        if (devMode.debugMode) {
            toggle.style.background = '#10b981';
            circle.style.left = '22px';
            showNotification('ë””ë²„ê·¸ ëª¨ë“œ ON âœ…', 'success');
            console.log('ğŸ› ë””ë²„ê·¸ ëª¨ë“œ í™œì„±í™”');
        } else {
            toggle.style.background = '#334155';
            circle.style.left = '2px';
            showNotification('ë””ë²„ê·¸ ëª¨ë“œ OFF âŒ', 'error');
        }
    } else if (option === 'fastmode') {
        devMode.fastMode = !devMode.fastMode;
        if (devMode.fastMode) {
            toggle.style.background = '#10b981';
            circle.style.left = '22px';
            showNotification('ë¹ ë¥¸ ì‘ë‹µ ON âš¡', 'success');
        } else {
            toggle.style.background = '#334155';
            circle.style.left = '2px';
            showNotification('ë¹ ë¥¸ ì‘ë‹µ OFF âŒ', 'error');
        }
    }
    
    if (devMode.debugMode) {
        console.log(`[DEV] ${option} í† ê¸€:`, devMode);
    }
}

function devSaveChat() {
    saveChatHistory();
    showNotification('ëŒ€í™”ê°€ ì €ì¥ë˜ì—ˆìŠµë‹ˆë‹¤ ğŸ’¾', 'success');
    if (devMode.debugMode) console.log('[DEV] ëŒ€í™” ì €ì¥:', chatHistory.length, 'ê°œ');
}

function devLoadChat() {
    loadChatHistory();
    showNotification('ëŒ€í™”ë¥¼ ë¶ˆëŸ¬ì™”ìŠµë‹ˆë‹¤ ğŸ“‚', 'success');
    if (devMode.debugMode) console.log('[DEV] ëŒ€í™” ë¶ˆëŸ¬ì˜¤ê¸°:', chatHistory.length, 'ê°œ');
}

function devExportChat() {
    const data = JSON.stringify(chatHistory, null, 2);
    const blob = new Blob([data], { type: 'application/json' });
    const url = URL.createObjectURL(blob);
    const a = document.createElement('a');
    a.href = url;
    a.download = `nextcode-ai-v9-${Date.now()}.json`;
    a.click();
    URL.revokeObjectURL(url);
    showNotification('ëŒ€í™”ë¥¼ ë‚´ë³´ëƒˆìŠµë‹ˆë‹¤ ğŸ’¾', 'success');
    if (devMode.debugMode) console.log('[DEV] ëŒ€í™” ë‚´ë³´ë‚´ê¸° ì™„ë£Œ');
}

function devClearChat() {
    if (confirm('ğŸ—‘ï¸ ì •ë§ ëª¨ë“  ëŒ€í™”ë¥¼ ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?')) {
        chatHistory = [];
        totalChats = 0;
        localStorage.removeItem('nextcode_chat_v9');
        localStorage.removeItem('nextcode_total_chats');
        showNotification('ëª¨ë“  ëŒ€í™”ê°€ ì‚­ì œë˜ì—ˆìŠµë‹ˆë‹¤ ğŸ—‘ï¸', 'success');
        if (devMode.debugMode) console.log('[DEV] ëª¨ë“  ëŒ€í™” ì‚­ì œë¨');
        setTimeout(() => location.reload(), 1000);
    }
}

// íŒŒí‹°í´ ìƒì„±
function createParticles() {
const container = document.getElementById('particles');
for (let i = 0; i < 30; i++) {
const particle = document.createElement('div');
particle.className = 'particle';
particle.style.left = Math.random() * 100 + '%';
particle.style.animationDelay = Math.random() * 20 + 's';
particle.style.animationDuration = (15 + Math.random() * 10) + 's';
container.appendChild(particle);
}
}

// ë©”ì‹œì§€ ì „ì†¡
document.getElementById('sendButton').addEventListener('click', sendMessage);
document.getElementById('userInput').addEventListener('keypress', function(e) {
if (e.key === 'Enter') sendMessage();
});

function sendMessage() {
const input = document.getElementById('userInput');
const message = input.value.trim();
if (!message) return;

addMessage(message, 'user');
input.value = '';
totalChats++;
document.getElementById('totalChats').textContent = totalChats;
document.getElementById('statsTotal').textContent = totalChats;
if (devMode.active) {
    document.getElementById('devTotalChats').textContent = totalChats;
}

showTyping();
const delay = devMode.fastMode ? 500 : 1500;
setTimeout(() => {
hideTyping();
const response = getAIResponse(message);
addMessage(response, 'ai');
saveChatHistory();
updateStats();
}, delay);
}

// ë©”ì‹œì§€ ì¶”ê°€
function addMessage(text, type) {
const welcomeMsg = document.querySelector('.welcome-message');
if (welcomeMsg) welcomeMsg.remove();

const chatArea = document.getElementById('chatArea');
const messageDiv = document.createElement('div');
messageDiv.className = `message ${type}`;

const avatar = document.createElement('div');
avatar.className = `avatar ${type}`;
avatar.textContent = type === 'user' ? 'ğŸ‘¤' : 'ğŸ§ ';

const content = document.createElement('div');
content.className = 'message-content';
content.textContent = text;

// TTS ë²„íŠ¼ ì¶”ê°€ (AI ë©”ì‹œì§€ì—ë§Œ)
if (type === 'ai') {
const ttsBtn = document.createElement('button');
ttsBtn.className = 'tts-btn';
ttsBtn.textContent = 'ğŸ”Š';
ttsBtn.onclick = () => speakText(text);
content.appendChild(ttsBtn);

// TTS ìë™ ì¬ìƒ
if (ttsEnabled) {
setTimeout(() => speakText(text), 500);
}
}

messageDiv.appendChild(avatar);
messageDiv.appendChild(content);
chatArea.appendChild(messageDiv);

chatHistory.push({ text, type, timestamp: Date.now() });
scrollToBottom();
}

// AI ì‘ë‹µ ìƒì„±
function getAIResponse(message) {
const lower = message.toLowerCase();
 
const responses = {
'ì•ˆë…•': 'ì•ˆë…•í•˜ì„¸ìš”! NEXTCODE AI v9.0ì…ë‹ˆë‹¤. ìŒì„±, ì´ë¯¸ì§€, ë‹¤êµ­ì–´ ë²ˆì—­ ë“± ë‹¤ì–‘í•œ ê¸°ëŠ¥ì„ ì‚¬ìš©í•´ë³´ì„¸ìš”! ğŸš€',
'ìŒì„±': 'ğŸ¤ ìŒì„± ê¸°ëŠ¥ì„ ì‚¬ìš©í•˜ë ¤ë©´ ë§ˆì´í¬ ë²„íŠ¼ì„ í´ë¦­í•˜ì„¸ìš”. Web Speech APIë¥¼ í†µí•´ ì‹¤ì‹œê°„ ìŒì„± ì¸ì‹ì´ ê°€ëŠ¥í•©ë‹ˆë‹¤!',
'ì´ë¯¸ì§€': 'ğŸ“¸ ì´ë¯¸ì§€ ë¶„ì„ ê¸°ëŠ¥ìœ¼ë¡œ ì‚¬ì§„ì„ ì—…ë¡œë“œí•˜ë©´ AIê°€ ë‚´ìš©ì„ ë¶„ì„í•´ë“œë¦½ë‹ˆë‹¤. ì´ë¯¸ì§€ ë²„íŠ¼ì„ í´ë¦­í•´ë³´ì„¸ìš”!',
'ë²ˆì—­': 'ğŸŒ 50ê°œ ì–¸ì–´ë¥¼ ì§€ì›í•©ë‹ˆë‹¤. í•œêµ­ì–´, ì˜ì–´, ì¼ë³¸ì–´, ì¤‘êµ­ì–´, ìŠ¤í˜ì¸ì–´, í”„ë‘ìŠ¤ì–´ ë“± ë‹¤ì–‘í•œ ì–¸ì–´ë¡œ ì‹¤ì‹œê°„ ë²ˆì—­ì´ ê°€ëŠ¥í•©ë‹ˆë‹¤!',
'í…Œë§ˆ': 'ğŸ¨ í…Œë§ˆ ë¹Œë”ë¡œ ë‚˜ë§Œì˜ ì»¤ìŠ¤í…€ í…Œë§ˆë¥¼ ë§Œë“¤ ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì£¼ìš” ìƒ‰ìƒ, ë³´ì¡° ìƒ‰ìƒ, ë°°ê²½ ìƒ‰ìƒì„ ììœ ë¡­ê²Œ ì„¤ì •í•´ë³´ì„¸ìš”!',
'pwa': 'ğŸ“± ì´ ì•±ì€ PWAë¡œ ì œì‘ë˜ì–´ ëª¨ë°”ì¼ í™ˆ í™”ë©´ì— ì¶”ê°€í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì˜¤í”„ë¼ì¸ì—ì„œë„ ì‘ë™í•©ë‹ˆë‹¤!',
'í´ë¼ìš°ë“œ': 'â˜ï¸ ëª¨ë“  ëŒ€í™”ëŠ” ìë™ìœ¼ë¡œ í´ë¼ìš°ë“œì— ë°±ì—…ë©ë‹ˆë‹¤. ë¸Œë¼ìš°ì € localStorageë¥¼ ì‚¬ìš©í•´ ë°ì´í„°ë¥¼ ì•ˆì „í•˜ê²Œ ë³´ê´€í•©ë‹ˆë‹¤.',
'í†µê³„': 'ğŸ“Š ì‹¤ì‹œê°„ ëŒ€í™” í†µê³„ë¥¼ ì°¨íŠ¸ë¡œ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ëŒ€í™” íŒ¨í„´, ì‘ë‹µ ì‹œê°„, ë§Œì¡±ë„ ë“±ì„ ë¶„ì„í•©ë‹ˆë‹¤!',
'ì–´ì‹œìŠ¤í„´íŠ¸': 'ğŸ¤– AI ì–´ì‹œìŠ¤í„´íŠ¸ ëª¨ë“œë¡œ ëŒ€í™” ìš”ì•½, ì „ì²´ ë²ˆì—­, ë¶„ì„, ë‚´ë³´ë‚´ê¸° ë“±ì˜ ì‘ì—…ì„ ìë™í™”í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤!'
};

for (let key in responses) {
if (lower.includes(key)) {
return responses[key];
}
}

return `v9.0ì˜ ${Object.keys(responses).length}ê°€ì§€ í•µì‹¬ ê¸°ëŠ¥: ğŸ¤ìŒì„±ì¸ì‹ ğŸ“¸ì´ë¯¸ì§€ë¶„ì„ ğŸŒë‹¤êµ­ì–´ë²ˆì—­ â˜ï¸í´ë¼ìš°ë“œë™ê¸°í™” ğŸ¤–AIì–´ì‹œìŠ¤í„´íŠ¸ ğŸ¨í…Œë§ˆë¹Œë” ğŸ“±PWA ğŸ“Šì‹¤ì‹œê°„í†µê³„. ë” ì•Œê³  ì‹¶ì€ ê¸°ëŠ¥ì„ ë§ì”€í•´ì£¼ì„¸ìš”!`;
}

// ìŒì„± ì¸ì‹ ì´ˆê¸°í™”
function initVoiceRecognition() {
if ('webkitSpeechRecognition' in window) {
voiceRecognition = new webkitSpeechRecognition();
voiceRecognition.continuous = false;
voiceRecognition.interimResults = false;
voiceRecognition.lang = currentLanguage === 'ko' ? 'ko-KR' : 'en-US';

voiceRecognition.onresult = function(event) {
const transcript = event.results[0][0].transcript;
document.getElementById('userInput').value = transcript;
document.getElementById('voiceBtn').classList.remove('active');
showNotification('ìŒì„± ì¸ì‹ ì™„ë£Œ! âœ…', 'success');
};

voiceRecognition.onerror = function() {
document.getElementById('voiceBtn').classList.remove('active');
showNotification('ìŒì„± ì¸ì‹ ì‹¤íŒ¨ âŒ', 'error');
};
}

document.getElementById('voiceBtn').addEventListener('click', function() {
if (voiceRecognition) {
this.classList.add('active');
voiceRecognition.start();
showNotification('ë§ì”€í•˜ì„¸ìš”... ğŸ¤', 'info');
} else {
showNotification('ì´ ë¸Œë¼ìš°ì €ëŠ” ìŒì„± ì¸ì‹ì„ ì§€ì›í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤', 'error');
}
});
}

// TTS (Text-to-Speech)
function speakText(text) {
if ('speechSynthesis' in window) {
const utterance = new SpeechSynthesisUtterance(text);
utterance.lang = currentLanguage === 'ko' ? 'ko-KR' : 'en-US';
utterance.rate = 1.0;
utterance.pitch = 1.0;
speechSynthesis.speak(utterance);
showNotification('TTS ì¬ìƒ ì¤‘... ğŸ”Š', 'info');
}
}

document.getElementById('ttsToggle').addEventListener('click', function() {
ttsEnabled = !ttsEnabled;
this.classList.toggle('active');
showNotification(ttsEnabled ? 'TTS ìë™ ì¬ìƒ ON âœ…' : 'TTS ìë™ ì¬ìƒ OFF âŒ', ttsEnabled ? 'success' : 'error');
});

// ì´ë¯¸ì§€ ì—…ë¡œë“œ
function setupImageUpload() {
const imageBtn = document.getElementById('imageBtn');
const uploadArea = document.getElementById('imageUploadArea');
const imageInput = document.getElementById('imageInput');

imageBtn.addEventListener('click', function() {
uploadArea.style.display = uploadArea.style.display === 'none' ? 'block' : 'none';
});

uploadArea.addEventListener('click', () => imageInput.click());

uploadArea.addEventListener('dragover', (e) => {
e.preventDefault();
uploadArea.classList.add('dragover');
});

uploadArea.addEventListener('dragleave', () => {
uploadArea.classList.remove('dragover');
});

uploadArea.addEventListener('drop', (e) => {
e.preventDefault();
uploadArea.classList.remove('dragover');
if (e.dataTransfer.files.length) {
handleImageUpload(e.dataTransfer.files[0]);
}
});

imageInput.addEventListener('change', (e) => {
if (e.target.files.length) {
handleImageUpload(e.target.files[0]);
}
});
}

function handleImageUpload(file) {
const reader = new FileReader();
reader.onload = function(e) {
const preview = document.getElementById('imagePreview');
preview.innerHTML = `<img src="${e.target.result}" style="max-width: 100%; border-radius: 12px; margin-top: 15px;">`;
 
setTimeout(() => {
addMessage('ì´ë¯¸ì§€ë¥¼ ì—…ë¡œë“œí–ˆìŠµë‹ˆë‹¤', 'user');
const messageDiv = document.querySelector('.message:last-child .message-content');
const img = document.createElement('img');
img.src = e.target.result;
img.className = 'message-image';
img.onclick = () => window.open(e.target.result);
messageDiv.appendChild(img);
 
showTyping();
setTimeout(() => {
hideTyping();
addMessage('ğŸ“¸ ì´ë¯¸ì§€ ë¶„ì„ ì™„ë£Œ! ì´ ì´ë¯¸ì§€ì—ëŠ” ë‹¤ì–‘í•œ ìš”ì†Œê°€ í¬í•¨ë˜ì–´ ìˆìŠµë‹ˆë‹¤. v9.0ì˜ ê³ ê¸‰ ë¹„ì „ AIê°€ ìƒ‰ìƒ, ê°ì²´, í…ìŠ¤íŠ¸ë¥¼ ì‹¤ì‹œê°„ìœ¼ë¡œ ë¶„ì„í–ˆìŠµë‹ˆë‹¤.', 'ai');
}, 2000);
 
document.getElementById('imageUploadArea').style.display = 'none';
preview.innerHTML = '';
}, 500);
};
reader.readAsDataURL(file);
}

// ëª¨ë‹¬ ê´€ë¦¬
function openModal(modalId) {
document.getElementById(modalId).classList.add('active');
if (modalId === 'statsModal') {
updateChartData();
}
}

function closeModal(modalId) {
document.getElementById(modalId).classList.remove('active');
}

// ì–¸ì–´ ì„¤ì •
function setLanguage(lang) {
currentLanguage = lang;
document.querySelectorAll('.language-btn').forEach(btn => {
btn.classList.remove('selected');
});
event.target.classList.add('selected');
 
const langNames = {
ko: 'í•œêµ­ì–´', en: 'English', ja: 'æ—¥æœ¬èª', 
zh: 'ä¸­æ–‡', es: 'EspaÃ±ol', fr: 'FranÃ§ais',
de: 'Deutsch', ru: 'Ğ ÑƒÑÑĞºĞ¸Ğ¹', ar: 'Ø§Ù„Ø¹Ø±Ø¨ÙŠØ©'
};
 
showNotification(`ì–¸ì–´ê°€ ${langNames[lang]}(ìœ¼)ë¡œ ë³€ê²½ë˜ì—ˆìŠµë‹ˆë‹¤ âœ…`, 'success');
closeModal('translateModal');
}

// í…Œë§ˆ ì ìš©
function applyTheme() {
const primary = document.getElementById('primaryColor').value;
const secondary = document.getElementById('secondaryColor').value;
const bg = document.getElementById('bgColor').value;
 
document.documentElement.style.setProperty('--primary-color', primary);
document.documentElement.style.setProperty('--secondary-color', secondary);
document.documentElement.style.setProperty('--bg-color', bg);
 
const headers = document.querySelectorAll('.header, .floating-btn, .control-btn.active');
headers.forEach(el => {
el.style.background = `linear-gradient(135deg, ${primary} 0%, ${secondary} 100%)`;
});
 
showNotification('í…Œë§ˆê°€ ì ìš©ë˜ì—ˆìŠµë‹ˆë‹¤! ğŸ¨', 'success');
closeModal('themeModal');
}

// AI ì–´ì‹œìŠ¤í„´íŠ¸
function runAssistant(task) {
const tasks = {
summarize: 'ğŸ“ ëŒ€í™”ë¥¼ ìš”ì•½í•˜ê³  ìˆìŠµë‹ˆë‹¤...',
translate: 'ğŸŒ ì „ì²´ ëŒ€í™”ë¥¼ ë²ˆì—­í•˜ê³  ìˆìŠµë‹ˆë‹¤...',
analyze: 'ğŸ“Š ëŒ€í™” íŒ¨í„´ì„ ë¶„ì„í•˜ê³  ìˆìŠµë‹ˆë‹¤...',
export: 'ğŸ’¾ ëŒ€í™”ë¥¼ ë‚´ë³´ë‚´ê³  ìˆìŠµë‹ˆë‹¤...'
};
 
showNotification(tasks[task], 'info');
closeModal('assistantModal');
 
setTimeout(() => {
if (task === 'export') {
const data = JSON.stringify(chatHistory, null, 2);
const blob = new Blob([data], { type: 'application/json' });
const url = URL.createObjectURL(blob);
const a = document.createElement('a');
a.href = url;
a.download = `nextcode-ai-chat-${Date.now()}.json`;
a.click();
showNotification('ëŒ€í™”ë¥¼ ë‚´ë³´ëƒˆìŠµë‹ˆë‹¤! ğŸ’¾', 'success');
} else {
addMessage(`ğŸ¤– ì–´ì‹œìŠ¤í„´íŠ¸ ì‘ì—… ì™„ë£Œ: ${tasks[task].replace('...', '')}`, 'system');
showNotification('ì‘ì—…ì´ ì™„ë£Œë˜ì—ˆìŠµë‹ˆë‹¤! âœ…', 'success');
}
}, 2000);
}

// PWA ì„¤ì¹˜
function installPWA() {
showNotification('ë¸Œë¼ìš°ì € ë©”ë‰´ì—ì„œ "í™ˆ í™”ë©´ì— ì¶”ê°€"ë¥¼ ì„ íƒí•˜ì„¸ìš” ğŸ“±', 'info');
}

// ì°¨íŠ¸ ì—…ë°ì´íŠ¸
function updateChartData() {
const canvas = document.getElementById('statsChart');
const ctx = canvas.getContext('2d');
 
canvas.width = canvas.offsetWidth;
canvas.height = 200;
 
ctx.clearRect(0, 0, canvas.width, canvas.height);
 
// ê°„ë‹¨í•œ ë§‰ëŒ€ ê·¸ë˜í”„
const data = [12, 19, 15, 25, 22, 30, 28];
const max = Math.max(...data);
const barWidth = canvas.width / data.length - 10;
 
data.forEach((value, index) => {
const barHeight = (value / max) * (canvas.height - 40);
const x = index * (barWidth + 10) + 10;
const y = canvas.height - barHeight - 20;
 
const gradient = ctx.createLinearGradient(0, y, 0, canvas.height);
gradient.addColorStop(0, '#667eea');
gradient.addColorStop(1, '#764ba2');
 
ctx.fillStyle = gradient;
ctx.fillRect(x, y, barWidth, barHeight);
 
ctx.fillStyle = '#64748b';
ctx.font = '12px sans-serif';
ctx.textAlign = 'center';
ctx.fillText(value, x + barWidth / 2, canvas.height - 5);
});
}

// í†µê³„ ì—…ë°ì´íŠ¸
function updateStats() {
document.getElementById('totalChats').textContent = totalChats;
document.getElementById('statsTotal').textContent = totalChats;
}

// ì±„íŒ… ê¸°ë¡ ì €ì¥/ë¶ˆëŸ¬ì˜¤ê¸°
function saveChatHistory() {
try {
localStorage.setItem('nextcode_chat_v9', JSON.stringify(chatHistory));
localStorage.setItem('nextcode_total_chats', totalChats);
} catch (e) {
console.log('ì €ì¥ ì‹¤íŒ¨:', e);
}
}

function loadChatHistory() {
try {
const saved = localStorage.getItem('nextcode_chat_v9');
const savedTotal = localStorage.getItem('nextcode_total_chats');
if (saved) {
chatHistory = JSON.parse(saved);
}
if (savedTotal) {
totalChats = parseInt(savedTotal);
updateStats();
}
} catch (e) {
console.log('ë¶ˆëŸ¬ì˜¤ê¸° ì‹¤íŒ¨:', e);
}
}

// íƒ€ì´í•‘ í‘œì‹œ
function showTyping() {
const chatArea = document.getElementById('chatArea');
const typingDiv = document.createElement('div');
typingDiv.className = 'message ai';
typingDiv.id = 'typing';

const avatar = document.createElement('div');
avatar.className = 'avatar ai';
avatar.textContent = 'ğŸ§ ';

const indicator = document.createElement('div');
indicator.className = 'typing-indicator active';
indicator.innerHTML = '<div class="typing-dot"></div><div class="typing-dot"></div><div class="typing-dot"></div>';

typingDiv.appendChild(avatar);
typingDiv.appendChild(indicator);
chatArea.appendChild(typingDiv);
scrollToBottom();
}

function hideTyping() {
const typing = document.getElementById('typing');
if (typing) typing.remove();
}

// ì•Œë¦¼ í‘œì‹œ
function showNotification(text, type = 'info') {
const notification = document.getElementById('notification');
notification.className = `notification ${type} show`;
document.getElementById('notificationText').textContent = text;
 
setTimeout(() => {
notification.classList.remove('show');
}, 3000);
}

// ìŠ¤í¬ë¡¤
function scrollToBottom() {
const chatArea = document.getElementById('chatArea');
chatArea.scrollTop = chatArea.scrollHeight;
}

// ëª¨ë‹¬ ì™¸ë¶€ í´ë¦­ ì‹œ ë‹«ê¸°
document.querySelectorAll('.modal').forEach(modal => {
modal.addEventListener('click', function(e) {
if (e.target === this) {
this.classList.remove('active');
}
});
});
</script>
</body>
</html>
